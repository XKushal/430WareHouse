package gui;
import warehouse.*;
import java.util.*;

public class PlaceOrderState extends WarehouseState{

    private static PlaceOrderState instance;
    private static ArrayList<Product> products = new ArrayList<Product>();
    private static ArrayList<Integer> quantities = new ArrayList<Integer>();
    private static String orderForm;
    private static double orderCost;

    private PlaceOrderState(){

    }

    public static PlaceOrderState instance() {
        if ( instance == null )
            return instance = new PlaceOrderState();
        return instance;
    }

    PlaceOrderPanel panel = new PlaceOrderPanel();

    public void run()
    {
        panel.setup();
        changePanel(panel);
    }

    public void addToOrderPressed(){
         panel.resultTextBox.append("Not yet implemented.");
//        String id = panel.idTextField.getText();
//        boolean valid = true;
//        int quantity = 0;
//        if(orderForm == null){
//            orderCost = 0.0;
//            orderForm = "Order for " + Security.instance().getClientID() + "\n\nProduct\tID\tQuantity\tCost per unit\tTotal Cost\n"
//                + "---------------------------------------------------------------------------------------------------------------\n";
//        }
//
//        try{
//            quantity = Integer.parseInt(panel.quantityTextField.getText());
//        } catch(Exception e){
//            panel.resultTextBox.append("Please enter a valid quantity!\n");
//            valid = false;
//        }
//
//        Product result;
//        result = (Product)Warehouse.instance().searchProduct(id);
//        if ((result == null)) {
//            panel.resultTextBox.append("Could not find product!\n");
//        }
//        if((result != null) && (valid)) {
//            orderForm += result.getName() + "\t" + result.getId() + "\t" + quantity + "\t$" + result.getPrice() + "\t$"
//                    + (result.getPrice() * quantity) + "\n";
//            panel.resultTextBox.append(result.toString()
//                    + " quantity " + quantity + "\n");
//            products.add(result);
//            quantities.add(new Integer(quantity));
//        }
//        panel.idTextField.setText("");
//        panel.quantityTextField.setText("");
    }

    public void completeOrderPressed(){
        
         panel.resultTextBox.append("Not yet implemented.");
//        orderCost = 0;
//        Order o = Warehouse.instance().createOrder(Security.instance().getClientID());
//        if(products.isEmpty())
//            return;
//        while(!products.isEmpty()){
//            Product p = Warehouse.instance().addToOrder(
//                    Security.instance().getClientID(), o.getID(),
//                    products.get(0).getId(), quantities.get(0).intValue());
//            if( p == null)
//                panel.resultTextBox.append("Product " + products.get(0).getId() + " was not added to the order\n");
//            else
//                orderCost += p.getPrice() * quantities.get(0).intValue();
//            products.remove(0);
//            quantities.remove(0);
//        }
//        orderForm += "\n---------------------------------------------------------------------------------------------------------------\n\n"
//              + "Total cost for this order: $" + orderCost;
//        Warehouse.instance().completeOrder(orderForm, Security.instance().getClientID(), o.getID(), orderCost);
//        panel.resultTextBox.append("Order " + o.getID() +
//                " has been received and is ready to be processed\n");
//        panel.resultTextBox.append(orderForm);
//        panel.idTextField.setText("");
//        panel.quantityTextField.setText("");
    }
}
